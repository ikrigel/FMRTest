## Requirements Checklist

Requirement 1: UserService with API Call on Component Load
- **Files:**
  - [src/app/services/user.service.ts](src/app/services/user.service.ts)
  - [src/app/components/user-orders/user-orders.component.ts](src/app/components/user-orders/user-orders.component.ts)
- **Implementation:**
  - UserService with `getUsers()` method
  - Mock data for 4 users with orders
  - Component dispatches `loadUsers()` action in `ngOnInit()`
  - API call handled through Effects (not directly from component)
  - Data saved to Store after successful fetch

Requirement 2: NGRX Entity Adapter
- **Status:** Complete
- **Files:** [src/app/store/reducers/user.reducer.ts](src/app/store/reducers/user.reducer.ts)
- **Implementation:**
  - Entity Adapter created with `createEntityAdapter<User>()`
  - UserState extends `EntityState<User>`
  - Additional properties: `selectedUserId`, `loading`, `error`
  - Initial state using `userAdapter.getInitialState()`
  - Full Entity Management support

Requirement 3: CRUD Operations with Duplicate Prevention
- **Files:**
  - [src/app/store/reducers/user.reducer.ts](src/app/store/reducers/user.reducer.ts)
  - [src/app/store/actions/user.actions.ts](src/app/store/actions/user.actions.ts)
  - [src/app/store/effects/user.effects.ts](src/app/store/effects/user.effects.ts)
- **Implementation:**
  - **Add:** `addOne()` with duplicate check - updates if exists
  - **Update:** `updateOne()` for existing users
  - **Delete:** `removeOne()` with selection clearing if needed
  - **Load/Save:** `setAll()` for initial load
  - Duplicate prevention in reducer (lines 50-64)

Requirement 4: State Structure and Selectors
- **Files:** [src/app/store/selectors/user.selectors.ts](src/app/store/selectors/user.selectors.ts)
- **Implementation:**
  - **4a:** `selectSelectedUser` - Returns selected user based on `selectedUserId`
  - **4b:** `selectSelectedUserOrders` - Returns all orders of selected user
  - **4c:** `selectSelectedUserSummary` - Returns object with userName and totalOrdersAmount
  - All selectors use memoization for performance
  - Selector composition for derived data

Requirement 5: UserOrdersComponent
- **Files:**
  - Main: [src/app/components/user-orders/](src/app/components/user-orders/)
  - Child 1: [src/app/components/user-name/](src/app/components/user-name/)
  - Child 2: [src/app/components/user-orders-total/](src/app/components/user-orders-total/)
- **Implementation:**
  - **5a:** UserOrdersComponent with:
    - User selection buttons
    - Clear selection button
    - Listens to selectors
    - Automatic updates when selection changes
  - **5b:** Split into two components:
    - **UserNameComponent:** Displays only user name
    - **UserOrdersTotalComponent:** Displays only total orders amount
    - Both listen to `selectSelectedUserSummary`
    - Both update automatically and independently
    - No direct communication between components

Requirement 6: RxJS Pipes with switchMap
- **Files:** [src/app/store/effects/user.effects.ts](src/app/store/effects/user.effects.ts)
- **Implementation:**
  - Effect listens to `selectedUserId` changes
  - Uses `switchMap` to call `getUserDetails()`
  - Automatically cancels previous API call when selection changes
  - Prevents race conditions
  - Ensures only latest selected user's data is loaded
  - Automatic trigger on user selection